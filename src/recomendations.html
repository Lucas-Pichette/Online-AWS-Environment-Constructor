<!DOCTYPE html>
<html>

<head>

    <!-- Change title to your website title -->
    <title>AWS Environment Constructor</title>

    <!-- Leave these as they are -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- These are useful for search engines when crawling the internet for your website -->
    <meta name="description" content="!TODO" />
    <meta name="keywords" content="!TODO" />
    <meta name="author" content="!TODO">
    <link rel="canonical" href="!TODO" />

    <!-- This tells the search engines whether to follow all of the links on your site. If you only want them to track your homepage, replace content="all,follow" with content="index,follow" -->
    <meta name="robots" content="all, follow" />

    <!-- These are the little icons that show up next to the title of the URL in the browser tab. For these to work, you must include a favicon.png file in the root of your website directory. This can also be favicon.jpg if you prefer, you just need to change the link in the href to favicon.jpg for it to work -->
    <link rel="shortcut icon" href="favicon.png">
    <link rel="icon" href="favicon.png" type="image/x-icon" />

    <!-- Social Media stuff. This all makes your links look much nicer and more shareable on Facebook and Twitter -->
    <!-- Facebook meta links - OG stands for OpenGraph by the way! -->
    <meta property="og:locale" content="en_GB" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="!TODO" />
    <meta property="og:description" content="!TODO" />
    <meta property="og:url" content="!TODO" />
    <meta property="og:site_name" content="!TODO" />
    <meta property="og:image" content="!TODO" />
    <!-- Twitter meta links -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:description" content="!TODO" />
    <meta name="twitter:title" content="!TODO" />
    <meta name="twitter:image" content="!TODO" />

    <!-- Your CSS link -->
    <link rel="stylesheet" type="text/css" href="./style.css" />

</head>

<script>
    window.onload = function() {
        //Assume all prices to be in USD 
        /* 
         * Prices can change depending upon origin of hardware; 
         * e.g. if you have your environment in Canada vs United States, 
         * it may cost a different amount. 
         */
        var questions = JSON.parse(sessionStorage.getItem(0));
        console.log("qs", questions)

        const solutions = [{
            name: "Serverless Website",
            /* If even one of these isn't met, don't display the solution */
            /* Expected answers won't include an answer for each question. Not 
            every question will be relevant to every solution. */
            expected_answers: [{
                /* The index of the question in the questions array */
                question: 1,
                type: "boolean",
                answer: true
            }, {
                /* The index of the question in the questions array */
                question: 2,
                type: "boolean",
                answer: true
            }, {
                /* The index of the question in the questions array */
                question: 3,
                type: "boolean",
                answer: true
            }, ],
            resources: [{
                name: "Route53",
                /* generic resource description */
                description: "Domain Name Service (DNS)",
                dependencies: [{
                    dependency: [{
                        resource: "Simple Storage Service (S3)"
                    }, {
                        reason: "While S3 itself is not a requirement, a static hosting origin (such as S3) is. To prevent friction and headache from trying to link resources from different providers, we would encourage the use of S3, as AWS allows for a convenient 'alias' record creation. You can just click on the name of the S3 bucket when creating an A record for it in Route53, for example!"
                    }, ]
                }],
                /* why this resource exists in the environment/solution */
                justification: "Allows your users to enter a domain name and be redirected to your website",
                /* costs are quite complex with AWS, I've removed non-related costs */
                costs: [{
                    name: "Hosted Zone",
                    type: "decimal",
                    cost: 0.5,
                }, {
                    name: "Per-Query",
                    type: "decimal",
                    cost: 0.0000004,
                }, ],
            }, {
                name: "Simple Storage Service (S3)",
                /* generic resource description */
                description: "Scalable object storage",
                dependencies: undefined,
                /* why this resource exists in the environment/solution */
                justification: "Static file hosting; dynamic backends can be added to this environment if desired",
                /* costs are quite complex with AWS, I've removed non-related costs */
                costs: [{
                    name: "Storage (GB)",
                    type: "decimal",
                    cost: 0.023,
                }, {
                    name: "Per PUT Request",
                    type: "decimal",
                    cost: 0.000005,
                }, {
                    name: "Per GET Request",
                    type: "decimal",
                    cost: 0.0000004,
                }, ],
            }, {
                name: "CloudFront",
                /* generic resource description */
                description: "Content Distribution Network (CDN)",
                dependencies: [{
                    dependency: [{
                        resource: "Certificate Manager"
                    }, {
                        reason: "CloudFront requries a TLS/SSL certificate in order to be created, as it transmits data via HTTPS."
                    }, ]
                }],
                /* why this resource exists in the environment/solution */
                justification: "HTTPS (Secure) web-based connection to website resources, data caching for hosting origin (S3) relief, and data caching for faster retrieval times.",
                /* costs are quite complex with AWS, I've removed non-related costs */
                costs: [{
                    name: "Data Transfer: To Internet (GB)",
                    type: "decimal",
                    cost: 0.085,
                }, {
                    name: "Data Transfer: To Origin (GB)",
                    type: "decimal",
                    cost: 0.02,
                }, ],
            }, {
                name: "Certificate Manager",
                /* generic resource description */
                description: "Manages TLS and SSL certificates",
                dependencies: [{
                    dependency: [{
                        resource: "Route53"
                    }, {
                        reason: "While you may be able to use a DNS from another provider, the difficulty of such with integration to Certificate Manager is unknown. It's encouraged to use Rotue53 as your DNS for ease-of-use when using Certificate Manager."
                    }, ]
                }],
                /* why this resource exists in the environment/solution */
                justification: "Required for HTTPS-based connections.",
                /* costs are quite complex with AWS, I've removed non-related costs */
                // No costs associated to this service
                costs: null
            }, ],
        }, {
            name: "Standalone API",
            /* If even one of these isn't met, don't display the solution */
            /* Expected answers won't include an answer for each question. Not 
            every question will be relevant to every solution. */
            expected_answers: [{
                /* The index of the question in the questions array */
                question: 1,
                type: "boolean",
                answer: true
            }, {
                /* The index of the question in the questions array */
                question: 2,
                type: "boolean",
                answer: false
            }, {
                /* The index of the question in the questions array */
                question: 3,
                type: "boolean",
                answer: false
            }, {
                /* The index of the question in the questions array */
                question: 4,
                type: "boolean",
                answer: true
            }, ],
            resources: [{
                name: "Route53",
                /* generic resource description */
                description: "Domain Name Service (DNS)",
                dependencies: [{
                    dependency: [{
                        resource: "Elastic Compute Cloud (EC2)"
                    }, {
                        reason: "While EC2 itself is not a requirement, a server hosting origin (such as EC2) is. To prevent friction and headache from trying to link resources from different providers, we would encourage the use of EC2, as AWS allows for a convenient 'alias' record creation. You can just click on the name of the EC2 instance when creating an A record for it in Route53, for example!"
                    }, ]
                }],
                /* why this resource exists in the environment/solution */
                justification: "Allows your users to enter a domain name and be redirected to your website; Not required if connecting to 'public ipv4' is acceptable.",
                /* costs are quite complex with AWS, I've removed non-related costs */
                costs: [{
                    /* Allows for different views of pricing based on single vs many options */
                    type: "single",
                    options: [{
                        1: [
                            /* Note the lack of option_name, costs, and nested array to costs */
                            /* We can predict this lack of data by referring to the type attribute */
                            {
                                name: "Hosted Zone",
                                type: "decimal",
                                cost: 0.5,
                            }, {
                                name: "Per-Query",
                                type: "decimal",
                                cost: 0.0000004,
                            },
                        ],
                    }, ],
                }, ],
            }, {
                name: "Elastic Compute Cloud (EC2)",
                /* generic resource description */
                description: "Cloud-based Compute Service (Virtual Machine in the Cloud)",
                dependencies: undefined,
                /* why this resource exists in the environment/solution */
                justification: "The hosting origin for your API, and where all of your development will occur",
                /* costs are quite complex with AWS, I've removed non-related costs */
                costs: [{
                    /* Allows for different views of pricing based on single vs many options */
                    type: "many",
                    options: [{
                        1: [
                            /* Note the presence of option_name, costs, and nested array to costs */
                            /* We can predict this increase of data by referring to the type attribute */
                            {
                                option_name: "t2_micro",
                                /* Note the presence of option_meta_data */
                                /* We can predict if this extra data will be here by the type attribute used previously */
                                option_meta_data: {
                                    cost_options: true,
                                },
                                details: {
                                    free_tier_eligble: true,
                                    vCPUs: 1,
                                    RAM: 1,
                                    Network_Performance: "Low to Moderate",
                                    more_details: undefined,
                                },
                                costs: [
                                    /* Note the presence of a new nested json, with an attribute hourly_payment_options */
                                    /* We can predict if this extra data will be here with the option_meta_data attribute, 
                                    and it's cost_options attribute. */
                                    {
                                        name: hourly_payment_options,
                                        options: [{
                                            name: "On-Demand Per-Hour",
                                            type: "decimal",
                                            cost: 0.0116,
                                        }, {
                                            name: "1-yr Reserved Instance (effective hourly)",
                                            type: "decimal",
                                            cost: 0.007,
                                        }, {
                                            name: "3-yr Reserved Instance (effective hourly)",
                                            type: "decimal",
                                            cost: 0.005,
                                        }, ]
                                    }
                                ],
                            }, {
                                option_name: "m6i_large",
                                /* Note the presence of option_meta_data */
                                /* We can predict if this extra data will be here by the type attribute used previously */
                                option_meta_data: {
                                    cost_options: false,
                                },
                                details: {
                                    free_tier_eligble: false,
                                    vCPUs: 2,
                                    RAM: 8,
                                    Network_Performance: undefined,
                                    more_details: [{
                                        detail: {
                                            name: Network_Bandwidth,
                                            amount: 12.5,
                                        },
                                        detail: {
                                            name: EBS_Bandwidth,
                                            amount: 10,
                                        },
                                    }, ],
                                },
                                costs: [{
                                    name: "On-Demand Per-Hour",
                                    type: "decimal",
                                    cost: 0.096,
                                }, ],
                            }
                        ],
                    }, ],
                }, ],
            }, ],
        }]

        var checkAnswers = -1;
        //check if first solution
        if ((questions[0].userAnswer == true) && (questions[1].userAnswer == true) && (questions[2].userAnswer == true)) {
            console.log("ans1", 0)
            checkAnswers = 0
        }

        //check if second solution
        if ((questions[0].userAnswer == true) && (questions[1].userAnswer == false) && (questions[2].userAnswer == false) && (questions[3].userAnswer == true)) {
            console.log(1)
            checkAnswers = 1
        }

        //if a solution was found
        if (checkAnswers != -1) {

            var card = document.createElement('div');
            card.innerHTML =
                '<div class="solutionTitle">' +
                '<h2 style="font-size:38px;">' + solutions[checkAnswers].name + '</h2>' +
                '</div>'

            document.getElementById("cardzone").appendChild(card)

            for (i = 0; i < Object.keys(solutions[checkAnswers].resources).length; i++) {
                var resources = document.createElement('div');
                resources.innerHTML =
                    '<h2 class ="resourceTitle">' + '' + solutions[checkAnswers].resources[i].name + '</h2>' +
                    '<div >' +
                    '<ul>' +
                    '<li class="text-white">' + 'Description: ' + solutions[checkAnswers].resources[i].description + '</li>' +
                    '</ul>' +
                    '<ul>' +
                    '<li class="text-white">' + 'Justification: ' + solutions[checkAnswers].resources[i].justification + '</li>' +
                    '</ul>'

                '</div>'

                document.getElementById("cardzone").appendChild(resources)

                if (solutions[checkAnswers].resources[i].costs != null) {
                    var costTitle = document.createElement('div');

                    costTitle.innerHTML =
                        '<div>' +
                        '<ul>' +
                        '<li class = "text-white">' + 'Cost by type:' + '</li>' +
                        '</ul>' +
                        '</div>'

                    document.getElementById("cardzone").appendChild(costTitle)

                    if (solutions[checkAnswers].resources[i].costs)
                        for (j = 0; j < Object.keys(solutions[checkAnswers].resources[i].costs).length; j++) {
                            var resourceCosts = document.createElement('div');
                            resourceCosts.innerHTML =
                                '<div class="costsPadding">' +
                                '<ul>' +
                                '<li class="text-white">' + solutions[checkAnswers].resources[i].costs[j].name + ': $' + solutions[checkAnswers].resources[i].costs[j].cost.toString() + '</li>' +
                                '</ul>' +
                                '</div>'

                            document.getElementById("cardzone").appendChild(resourceCosts)
                        }
                }
            }

        } else {
            document.getElementById('output').innerHTML = "No Solutions Found"
        }
    };
</script>

<body class="body" style="margin: 0;">

    <h1 class="text-white surveyTitle">Recomendations</h1>

    <div class="divflex">
        <div id="cardzone" class="card container ">

        </div>
        <div>

            <h2 id="output"> </h2>
            <a href="./index.html">Return Home</a>

        </div>
    </div>

</body>

</html>